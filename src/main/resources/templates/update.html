<!DOCTYPE html>
<html lang="ko" xmlns:th="https://thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate='~{layouts/layout1}'>

<head>
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    <script th:src="@{/js/board_update.js}"></script>
</head>

<div layout:fragment="content">
    <form id="board-update" th:action="@{/board/update/{id}(id=${boardDTO.id})}" method="post" enctype="multipart/form-data">
        title: <input type="text" name="boardTitle" th:value="${boardDTO.boardTitle}"> <br>
        contents: <textarea name="boardContent" cols="30" rows="10" th:text="${boardDTO.boardContent}"></textarea> <br>
        
        <!-- 기존 이미지 미리 보기 섹션 -->
        <div class="form-group" th:if="${boardDTO.imgUrl}">
            <label>기존 이미지:</label>
            <div class="img-preview">
                <img th:src="@{${boardDTO.imgUrl}}" alt="현재 이미지" style="max-width: 300px; max-height: 300px;">
            </div>
            <!-- 이미지 삭제 체크박스 -->
            <div>
                <input type="checkbox" name="deleteImg" id="deleteImg">
                <label for="deleteImg">이미지 삭제</label>
            </div>
        </div>
        
        <!-- 파일 입력 -->
        <div class="custom-file img-div">
            <input type="file" class="custom-file-input" name="boardImgFile" id="boardImgFile" th:if="${boardDTO.imgUrl}">
            <label class="custom-file-label" for="boardImgFile"></label>
        </div>
        
        <!-- 기존 이미지 정보를 숨겨진 필드로 포함 -->
        <input type="hidden" name="imgUrl" th:value="${boardDTO.imgUrl}">
        <input type="hidden" name="oriImgName" th:value="${boardDTO.oriImgName}">
        <input type="submit" value="글 수정">
        <input type="reset" value="취소"> 
        <input type="hidden" name="id" th:value="${boardDTO.id}" id="boardid">
    </form>
</div>
</html>
